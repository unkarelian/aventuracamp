---
interface Props {
  currentPath?: string;
}

const { currentPath = '/' } = Astro.props;

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/features', label: 'Features' },
  { href: '/setup', label: 'Setup' },
  { href: '/docs', label: 'Docs' },
  { href: 'https://github.com/unkarelian/Aventura', label: 'GitHub', external: true },
];
---

<header class="w-full border-b border-solid border-border-brown bg-background-dark/95 backdrop-blur-sm sticky top-0 z-50">
  <div class="mx-auto max-w-7xl px-5 sm:px-10 py-4 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-3 text-text-cream hover:opacity-90 transition-opacity">
      <img src="/logo.png" alt="Aventura" class="w-8 h-8" />
      <h2 class="text-2xl font-bold tracking-tight text-text-cream">Aventura</h2>
    </a>

    <!-- Desktop Navigation -->
    <nav class="hidden md:flex items-center gap-8">
      {navLinks.map(link => (
        <a
          href={link.href}
          target={link.external ? '_blank' : undefined}
          rel={link.external ? 'noopener noreferrer' : undefined}
          class:list={[
            'text-sm font-medium font-body transition-colors',
            currentPath === link.href
              ? 'text-primary'
              : 'text-text-muted hover:text-primary'
          ]}
        >
          {link.label}
          {link.external && (
            <span class="material-symbols-outlined text-xs ml-1 align-middle">open_in_new</span>
          )}
        </a>
      ))}
    </nav>

    <!-- Mobile Menu Button -->
    <button class="md:hidden text-text-muted hover:text-primary transition-colors" id="mobile-menu-btn" aria-label="Toggle menu">
      <span class="material-symbols-outlined text-2xl">menu</span>
    </button>
  </div>

  <!-- Mobile Navigation -->
  <nav class="hidden md:hidden border-t border-border-brown bg-background-dark" id="mobile-menu">
    <div class="px-5 py-4 flex flex-col gap-4">
      {navLinks.map(link => (
        <a
          href={link.href}
          target={link.external ? '_blank' : undefined}
          rel={link.external ? 'noopener noreferrer' : undefined}
          class:list={[
            'text-base font-medium font-body transition-colors py-2',
            currentPath === link.href
              ? 'text-primary'
              : 'text-text-muted hover:text-primary'
          ]}
        >
          {link.label}
          {link.external && (
            <span class="material-symbols-outlined text-xs ml-1 align-middle">open_in_new</span>
          )}
        </a>
      ))}
    </div>
  </nav>
</header>

<script>
  const menuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');

  menuBtn?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
    const icon = menuBtn.querySelector('.material-symbols-outlined');
    if (icon) {
      icon.textContent = mobileMenu?.classList.contains('hidden') ? 'menu' : 'close';
    }
  });
</script>
